---
# For HGST (Hitachi Global Storage Technology) disk
# Ex. HGST HUS724040ALA640
- name: "Running SMART overall-health self-assessment on disk /dev/{{ disk }}."
  debug: msg="model - HGST"

- include: "{{STAGES_PATH}}/reimage_conf/smart_check_default.yml"

- name: "Get raw value of SMART attribute Raw_Read_Error_Rate for /dev/{{ disk }}."
  shell: "smartctl -A /dev/{{ disk }} | awk '/Raw_Read_Error_Rate/ {print $10}'"
  register: smartRRER
  ignore_errors: true

- fail: msg="Sanity check failed for SMART attribute Raw_Read_Error_Rate"
  when: smartRRER is defined and smartRRER.stdout != "" and smartRRER.stdout | int > THRESHOLD_SMART_RRER
...
